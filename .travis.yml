sudo: required
language: c
script:
- bash build-and-test.sh
matrix:
  include:
  - os: linux
    dist: trusty
    compiler: gcc
    env: PACKAGES_INSTALL="libusb-1.0-0-dev libncurses5-dev gcc-multilib"
  - os: osx
    compiler: clang
    env: PACKAGES_INSTALL="libusb"
  - os: linux
    dist: trusty
    compiler: gcc
    env: OSTYPE=msys PACKAGES_INSTALL="libudev-dev gcc-mingw-w64-i686 libncurses5-dev"
deploy:
  provider: releases
  skip_cleanup: true
  secure: "bawQuOsSiX8MyCXeA5PZI91jNsuVx/SEibJot3n0H7B41lcg9xxeyCkmVMLAP3osonq0sGT/g8Ja49ZpAnzsCSUixrYFKEtr8uFbGbvTgOrZ9+hxR9xN2WOG7Zm8qYX0ZoPcUezVTOmwtKayHFB9nuKUqIKWEm3JLEr+RsU8IfWF6bI1nwVI2xvvFKzH5e0ik49HvPijE+RssN24k3j+doiKm11nAaTBClNzxSLAYM2HikbZshcvhBtVtcI+0m1qwPVg9G9Ap2qs2RtjukiH8cwUYbQstIHa099r/c8BsnyicS2Raal9OxP6sigwMUBG1ntCTGaHdlIUtk9Kfj+mZCpiTVuARkCyAkLN45T28xUCv5wssGWI7PwU+oblZ245aoaQA/PRTe1v3fjHj1z21VyLqpH38w8ymdAs+v91D6QPAqt0ZifYQUcU7zcmZBJHhO8hiHOkkKWWIo8gRO31MrDVx18su3K7Ig02IUnAQdVGTrzOdFRUcB9PKT5BtG6DCTK2N+D25z6pwYmUzoG+ksJUHpQNgHJm0A/y0C4dZp2VcyR0dcsCbraKHS8pXuFhwDA4B2W72Aia+OmtJo0Nf7ERMwJNt4lxit/RBwUzveVEoMAxA3aReB7uCOATtjSHfOIb6l6+zHejV/CQK8iqDSQbzaqDzT7uKGJT3R9auDE="
  file_glob: true
  file: $(pwd)/build/*.zip
  on:
    tags: true
    all_branches: true
